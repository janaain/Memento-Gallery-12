<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/criaralbum.css">
    <script src="javascript/criaralbum.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <title>Memento Gallery</title>
    
</head>
<body>
    <div class="main" id="main">
        <div id="header"></div>

        <div class="top_bar">
            <a href="index.html" ><img src="Images/homepage.png" class="homepage"></a>
            <span>Criação de Albuns</span>
        </div>

        <div class="menu">
                <ul>
                    <li id="step"><h2 onclick="setCurrentStep(1)">1. Adicionar Fotos</h2>
                        <h5>Clique em 'Adicionar Fotos' para começar.</h5>
                    </li>
                    <li id="step" class="disabled"><h2 onclick="setCurrentStep(2)">2. Seleção de Critérios</h2>
                        <h5>Selecione os critérios pelos quais as fotos serão adicionadas ao álbum.</h5> 
                    </li>
                    <li id="step" class="disabled"><h2 onclick="setCurrentStep(3)">3. Revisão e Conclusão</h2>
                        <h5> Dê um nome ao álbum. Reveja as fotografias e aprecie!</h5>  
                    </li">
                </ul>
        </div>
        <div class="content" id="Cphotos">
            <div class="photos" id="photos">
                <input type="file" id="fileInput" style="display: none;" multiple accept="image/*">
                <div class="images" id="addPhotos"><img src="Images/plus.png"><br><label>Adicionar Fotos</label></div>
            </div>
            <div id="addPhotosPopup" class="sharepopup" style="display: none;">
                    <div class="sharepopup-content">
                        <div class="closeShare">
                            <button id="closeImport">X</button>    
                        </div>
                        <h2>Importar Fotos</h2><br>
                        <button class="share-btn" id="deviceOption">Dispositivo</button>
                        <button class="share-btn" id="facebookOption">Facebook</button>
                        <button class="share-btn" id="twitterOption">Twitter</button>
                        <button class="share-btn" id="instagramOption">Instagram</button>
                        <button class="share-btn" id="emailOption">Email</button>
                </div>
            </div>
            <div id="facebookBack" class="sharepopup" style="display: none;">
                <div class="facebook-content">
                    <div class="closeShare">
                        <button id="closeFacebook">X</button>    
                    </div>
                    <h2>Facebook: as suas fotos</h2><br>
                    <div class="selectAll">
                        <label>
                            <span>Selecionar Todas</span>
                            <input type="checkbox">
                        </label>  
                    </div>
                    
                    <button id="okFacebook" class="okFacebook">Concluido</button>
                    <div id="facebookPhotos" class="inFacebook">
                        <label class="image-container">
                            <input type="checkbox">
                            <img src="fotos-de-paris/ArcTriunfe.jpeg" alt="ArcTriunfe">
                        </label>
                        <label class="image-container">
                            <input type="checkbox">
                            <img src="fotos-de-paris/crepe.jpeg" alt="Crepe">
                        </label>
                        <label class="image-container">
                            <input type="checkbox">
                            <img src="fotos-de-paris/croissant.jpg" alt="Croissant">
                        </label>
                        <label class="image-container">
                            <input type="checkbox">
                            <img src="fotos-de-paris/dinisClubHouse.jpeg" alt="Dinis Club House">
                        </label>
                        <label class="image-container">
                            <input type="checkbox">
                            <img src="fotos-de-paris/Disneyland.jpeg" alt="Disneyland">
                        </label>
                        <label class="image-container">
                            <input type="checkbox">
                            <img src="fotos-de-paris/Disneyland.webp" alt="Disneyland Webp">
                        </label>
                        <label class="image-container">
                            <input type="checkbox">
                            <img src="fotos-de-paris/fireworks.jpeg" alt="Fireworks">
                        </label>
                        <label class="image-container">
                            <input type="checkbox">
                            <img src="fotos-de-paris/Louvre.jpeg" alt="Louvre">
                        </label>
                        <label class="image-container">
                            <input type="checkbox">
                            <img src="fotos-de-paris/mime.jpg" alt="Mime">
                        </label>
                        <label class="image-container">
                            <input type="checkbox">
                            <img src="fotos-de-paris/montanhaFrancesa.jpg" alt="Montanha Francesa">
                        </label>
                        <label class="image-container">
                            <input type="checkbox">
                            <img src="fotos-de-paris/Notre-Dame.jpeg" alt="Notre Dame">
                        </label>
                        <label class="image-container">
                            <input type="checkbox">
                            <img src="fotos-de-paris/Psg.jpeg" alt="PSG">
                        </label>
                        <label class="image-container">
                            <input type="checkbox">
                            <img src="fotos-de-paris/Sena.jpeg" alt="Sena">
                        </label>
                        <label class="image-container">
                            <input type="checkbox">
                            <img src="fotos-de-paris/showMickey.jpeg" alt="Show Mickey">
                        </label>
                        <label class="image-container">
                            <input type="checkbox">
                            <img src="fotos-de-paris/showNatal.jpeg" alt="Show Natal">
                        </label>
                    
                        
                    </div>
                </div>
            </div>
        </div>


        

        <div class="content" id="Ccriterios">
            <div class="criterios" id="criterios">
                <!-- Coluna da Esquerda - Organizar Por -->
                <div class="column">
                    <h3>Incluir:</h3>
                    <ul>
                        <li>
                            <input type="radio" name="organizar" id="nao_dividir" checked>
                            <label for="nao_dividir">Colocar todas as fotos no álbum</label>
                        </li>
                        <li>
                            <input type="checkbox" name="organizar" id="data">
                            <label for="data">Data:</label>
                            <br>
                            <label for="data_inicio">De:</label>
                            <input type="date" id="data_inicio" style="margin-right: 10px;" disabled>
                            <label for="data_fim">Até:</label>
                            <input type="date" id="data_fim" disabled>
                        </li>
                        <li>
                            <input type="checkbox" name="organizar" id="qualidade">
                            <label for="qualidade">Qualidade:</label>
                            <br>
                            <label for="qualidade_min">De:</label>
                            <select id="qualityMin" name="qualityMin" style="margin-right: 10px;"  disabled>
                                <option value="poor">Selecione uma opção</option>
                                <option value="poor">Má</option>
                                <option value="fair">Razoável</option>
                                <option value="good">Boa</option>
                                <option value="very_good">Muito Boa</option>
                                <option value="excellent">Excelente</option>
                            </select>
                            <label for="qualidade_max">Até:</label>
                            <select id="qualityMax" name="qualityMax" disabled>
                                <option value="poor">Selecione uma opção</option>
                                <option value="poor">Má</option>
                                <option value="fair">Razoável</option>
                                <option value="good">Boa</option>
                                <option value="very_good">Muito Boa</option>
                                <option value="excellent">Excelente</option>
                            </select>
                        </li>                        
                        <li>
                            <input type="checkbox" name="organizar" id="resolucao">
                            <label for="resolucao">Proporção:</label>
                            <br>
                            <label for="resolucao_min">De:</label>
                            <input type="text" style="margin-right: 10px;" id="resolucao_min" placeholder="Ex: 1920x1080">
                            <label for="resolucao_max">Até:</label>
                            <input type="text" id="resolucao_max" placeholder="Ex: 1920x1080">
                        </li>
                        <li>
                            <div class="localizacao-mapa">
                                <div>
                                <input type="checkbox" name="localizacao" id="loc">
                                <label for="locationInput">Localização:</label>
                                <br>
                                <input type="text" style = "margin-left: 32px;" id="locationInput" name="location" placeholder="Selecionar no mapa" />
                                </div>
                                <!-- Adicionar Mapa no Canto Inferior Direito -->
                                <div id="map"></div>
                              </div>                             
                        </li>
                        <li>
                            <input type="checkbox" name="organizar" id="pessoa">
                            <label for="pessoa">Pessoa:</label>
                            <br>
                            <input type="text" style = "margin-left: 32px;" id="pessoa_valor" placeholder="Ex: Joana, Gonçalo, etc">
                        </li>
                        <li>
                            <input type="checkbox" name="organizar" id="tipo">
                            <label for="tipo">Tipo:</label>
                            <br>
                            <input type="text" style = "margin-left: 32px;" id="tipo_valor" placeholder="Ex: Macro, Paisagem, etc">
                        </li>
                    </ul>
                </div>
        
                <!-- Coluna da Direita - Manter de Fora -->
                <div class="column">
                    <h3 style="margin-bottom: 56px;">Excluir:</h3>
                    <ul>
                    <li>
                        <label for="data">Data:</label>
                        <br>
                        <label for="data_inicio">De:</label>
                        <input type="date" id="data_inicio" style="margin-right: 10px;" >
                        <label for="data_fim">Até:</label>
                        <input type="date" id="data_fim" >
                    </li>
                    <li>
                        <label for="qualidade">Qualidade:</label>
                        <br>
                        <label for="qualidade_min">De:</label>
                        <select id="qualityMin" name="qualityMin" style="margin-right: 10px;"  >
                            <option value="poor">Selecione uma opção</option>
                            <option value="poor">Selecione uma opção</option>
                            <option value="poor">Má</option>
                            <option value="fair">Razoável</option>
                            <option value="good">Boa</option>
                            <option value="very_good">Muito Boa</option>
                            <option value="excellent">Excelente</option>
                        </select>
                        <label for="qualidade_max">Até:</label>
                        <select id="qualityMax" name="qualityMax">
                            <option value="poor">Selecione uma opção</option>
                            <option value="poor">Má</option>
                            <option value="fair">Razoável</option>
                            <option value="good">Boa</option>
                            <option value="very_good">Muito Boa</option>
                            <option value="excellent">Excelente</option>
                        </select>
                    </li>                        
                    <li>
                        <label for="resolucao">Proporção:</label>
                        <br>
                        <label for="resolucao_min">De:</label>
                        <input type="text" style="margin-right: 10px;" id="resolucao_min" placeholder="Ex: 1920x1080">
                        <label for="resolucao_max">Até:</label>
                        <input type="text" id="resolucao_max" placeholder="Ex: 1920x1080">
                    </li>
                    <li>
                        <div>
                            <label for="locationInput">Localização:</label>
                            <br>
                            <input type="text" style = "margin-left: 32px;" id="locationInput" name="location" placeholder="Lisboa; França, Paris; etc" />
                          </div>                             
                    </li>
                    <li>
                        <label for="pessoa">Pessoa:</label>
                        <br>
                        <input type="text" style = "margin-left: 32px;" id="pessoa_valor" placeholder="Ex: Joana, Gonçalo, etc">
                    </li>
                    <li>
                        <label for="tipo">Tipo:</label>
                        <br>
                        <input type="text" style = "margin-left: 32px;" id="tipo_valor" placeholder="Ex: Macro, Paisagem, etc">
                    </li>
                </ul>
            <!-- Adicionar Mapa no Canto Inferior Direito -->
                </div>
            </div>
            </div>        
        <div class="content" id="Crever">
            <div class="nomeAlbum">
                <label for="album-name">Nome do Álbum:</label>
                <input type="text" id="album-name" placeholder="Nome">
            </div>
            <div class="content" id="photos">
                <div>
                    <img src="subconjuntos/11-04-2004/ArcTriunfe.jpeg" alt="ArcTriunfe">
                    <br><label>ArcTriunfe.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/11-04-2004/Louvre.jpeg" alt="Louvre">
                    <br><label>Louvre.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/11-04-2004/Notre-Dame.jpeg" alt="Notre-Dame">
                    <br><label>Notre-Dame.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/11-04-2004/Sena.jpeg" alt="Sena">
                    <br><label>Sena.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/11-04-2004/TorreEiffel.jpg" alt="Torre Eiffel">
                    <br><label>TorreEiffel.jpg</label>
                </div>
                <div>
                    <img src="subconjuntos/11-04-2004/Versalles.jpg" alt="Versalles">
                    <br><label>Versalles.jpg</label>
                </div>
                <div>
                    <img src="subconjuntos/14-04-2004/dinisClubHouse.jpeg" alt="Dinis Club House">
                    <br><label>dinisClubHouse.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/14-04-2004/Disneyland.jpeg" alt="Disneyland">
                    <br><label>Disneyland.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/14-04-2004/fireworks.jpeg" alt="Fireworks">
                    <br><label>fireworks.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/14-04-2004/montanhaFrancesa.jpg" alt="Montanha Francesa">
                    <br><label>montanhaFrancesa.jpg</label>
                </div>
                <div>
                    <img src="subconjuntos/14-04-2004/showMickey.jpeg" alt="Show Mickey">
                    <br><label>showMickey.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/14-04-2004/showNatal.jpeg" alt="Show Natal">
                    <br><label>showNatal.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/15-04-2004/crepe.jpeg" alt="Crepe">
                    <br><label>crepe.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/15-04-2004/mime.jpg" alt="Mime">
                    <br><label>mime.jpg</label>
                </div>
                <div>
                    <img src="subconjuntos/15-04-2004/croissant.jpg" alt="Croissant">
                    <br><label>croissant.jpg</label>
                </div>
                <div>
                    <img src="subconjuntos/15-04-2004/Psg.jpeg" alt="PSG">
                    <br><label>Psg.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/15-04-2004/streetArt.jpeg" alt="Street Art">
                    <br><label>streetArt.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/14-04-2004/showNatal.jpeg" alt="Show Natal">
                    <br><label>showNatal.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/15-04-2004/crepe.jpeg" alt="Crepe">
                    <br><label>crepe.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/15-04-2004/mime.jpg" alt="Mime">
                    <br><label>mime.jpg</label>
                </div>
                <div>
                    <img src="subconjuntos/15-04-2004/croissant.jpg" alt="Croissant">
                    <br><label>croissant.jpg</label>
                </div>
                <div>
                    <img src="subconjuntos/15-04-2004/Psg.jpeg" alt="PSG">
                    <br><label>Psg.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/15-04-2004/streetArt.jpeg" alt="Street Art">
                    <br><label>streetArt.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/14-04-2004/showNatal.jpeg" alt="Show Natal">
                    <br><label>showNatal.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/15-04-2004/crepe.jpeg" alt="Crepe">
                    <br><label>crepe.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/15-04-2004/mime.jpg" alt="Mime">
                    <br><label>mime.jpg</label>
                </div>
                <div>
                    <img src="subconjuntos/15-04-2004/croissant.jpg" alt="Croissant">
                    <br><label>croissant.jpg</label>
                </div>
                <div>
                    <img src="subconjuntos/15-04-2004/Psg.jpeg" alt="PSG">
                    <br><label>Psg.jpeg</label>
                </div>
                <div>
                    <img src="subconjuntos/15-04-2004/streetArt.jpeg" alt="Street Art">
                    <br><label>streetArt.jpeg</label>
                </div>
                

            </div>
        </div>
            
            <div>
                <button class="next" id="next">Próximo Passo</button>               
            </div>
            <div>
                <button class="prev" id="prev">Passo Anterior</button>               
            </div>
        </div>

    </div>
</div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
          var map = L.map('map').setView([51.505, -0.09], 13);
    
          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
          }).addTo(map);
    
          var currentMarker = null;
          var locationInput = document.getElementById('locationInput');
    
          // Function to perform reverse geocoding
          function reverseGeocode(lat, lng) {
            locationInput.value = "A carregar...";  // Show loading message
            var url = `https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lng}&format=json&addressdetails=1`;
    
            fetch(url)
              .then(response => response.json())
              .then(data => {
                // Extract specific fields: road, city, country
                var address = data.address;
                var road = address.road || '';
                var city = address.city || address.town || address.village || '';  // Get available field
                var country = address.country || '';
                
                // Concatenate the fields
                var locationName = `${road}, ${city}, ${country}`.trim();
    
                if (currentMarker) {
                  map.removeLayer(currentMarker);
                }
    
                // Set marker and display place name in input
                currentMarker = L.marker([lat, lng]).addTo(map)
                  .bindPopup(locationName)
                  .openPopup();
    
                locationInput.value = locationName;  // Update input with the place name
              })
              .catch(error => {
                console.log('Erro ao fazer reverse geocoding:', error);
                locationInput.value = "Erro ao obter a localização";
              });
          }
    
          function onMapClick(e) {
            reverseGeocode(e.latlng.lat, e.latlng.lng);
          }
    
          map.on('click', onMapClick);
        });
      </script>
      
      

</body>
</html>
